<templates id="template" xml:space="preserve">
    <t t-extend="portal.Chatter">
        <t t-jquery="hr[t-if='!two_columns']" t-operation="replace">
        	<hr t-if="widget.options['display_composer']"/>
    	</t>
    </t>
    <t t-extend="portal.chatter_messages">
        <t t-jquery="div.o_portal_chatter_message_title" t-operation="replace">
            <h5 class="mb-1 mt-2">
                <t t-if="message.author_id[1]">
                    <t t-set="author_parts" t-value="message.author_id[1].split(' ')" />
                    <t t-if="author_parts.length == 1">
                        <t t-esc="author_parts[0]" />
                    </t>
                    <t t-else="">
                        <t t-esc="author_parts[0] + ' ' + author_parts[1][0] + '.'" />
                    </t>
                </t>
            </h5>
            <h5 class="o_portal_chatter_puslished_date font-weight-lighter">
                <small class="text-muted">
                    <t t-esc="message.published_date_str"/>
                </small>
            </h5>
        </t>
    </t>
    <t t-name="portal_rating.rating_card">
        <t t-set="two_columns" t-value="widget.options['two_columns']"/>
        <div class="row o_website_rating_card_container justify-content-center">
            <div t-attf-class="#{two_columns and 'col-lg-12' or 'col-lg-3'}" t-if="!_.isEmpty(widget.get('rating_card_values'))">
                <div t-attf-class="o_website_rating_avg #{two_columns and 'mb-2' or 'text-center'}">
                    <h1><t t-esc="widget.get('rating_card_values')['avg']"/> <i class="fa fa-star" role="img"/></h1>
                    <t t-call="portal_rating.rating_stars_static">
                        <t t-set="val" t-value="widget.get('rating_card_values')['avg'] || 0"/>
                    </t>
                    <t t-call="portal.chatter_message_count"/>
                </div>
            </div>
            <div t-attf-class="#{two_columns and 'col-lg-12' or 'col-lg-6'}" t-if="!_.isEmpty(widget.get('rating_card_values'))">
                <hr t-if="two_columns"/>
                <div class="o_website_rating_progress_bars">
                    <table class="o_website_rating_progress_table">
                        <t t-foreach="widget.get('rating_card_values')['percent']" t-as="percent">
                            <tr class="o_website_rating_select" t-att-data-star="percent['num']" style="opacity: 1">
                                <td class="o_website_rating_table_star_num text-nowrap text-center" t-att-data-star="percent['num']">
                                    <t t-esc="percent['num']"/> <i class="fa fa-star" role="img"></i>
                                </td>
                                <td class="o_website_rating_table_progress">
                                    <div class="progress m-0">
                                        <div class="progress-bar o_rating_progressbar" role="progressbar" t-att-aria-valuenow="percent['percent']" aria-valuemin="0" aria-valuemax="100" t-att-style="'width:' + percent['percent'] + '%;'">
                                        </div>
                                    </div>
                                </td>
                                <td class="o_website_rating_table_percent">
                                    <strong><t t-esc="Math.round(percent['percent'] * 100) / 100"/>%</strong>
                                </td>
                                <td class="o_website_rating_table_reset">
                                    <button class="btn btn-link o_website_rating_select_text" t-att-data-star="percent['num']">
                                        <i t-attf-class="fa fa-times d-block #{!two_columns and 'd-sm-none' or ''}" role="img" aria-label="Remove Selection"/>
                                        <span t-attf-class="d-none #{!two_columns and 'd-sm-block' or ''}">Remove Selection</span>
                                    </button>
                                </td>
                            </tr>
                        </t>
                    </table>
                </div>
            </div>
        </div>
    </t>
</templates>
